연합학습 위성 시뮬레이터: 리팩토링 가이드
시뮬레이터가 더욱 복잡하고 정교해짐에 따라, 코드의 유지보수성과 확장성을 높이기 위해 전체 프로젝트 구조를 리팩토링했습니다.

기존의 단일 파일(monolithic.py) 방식에서 벗어나, 각 기능의 역할과 책임에 따라 여러 개의 파일과 폴더로 코드를 분리했습니다.

새로운 프로젝트 구조
.
├── logs/                 # 시뮬레이션 로그가 저장되는 폴더
│
├── data/                 # CIFAR-10 데이터셋이 저장되는 폴더
│
├── constellation.tle     # 위성 TLE 파일
│
├── .gitignore            # Git이 추적하지 않을 파일/폴더 목록
│
├── config.py             # 시뮬레이션의 모든 설정값(상수)을 관리
│
├── main.py               # 시뮬레이션을 시작하는 메인 스크립트
│
├── ml/                     # 머신러닝 관련 모듈
│   ├── data.py             # 데이터셋 로딩 및 분할 기능
│   ├── model.py            # PyTorch 모델 정의 (PyTorchModel, create_mobilenet)
│   └── training.py         # 연합 평균, 모델 평가 등 학습 관련 기능
│
├── simulation/             # 시뮬레이션 핵심 로직 모듈
│   ├── clock.py            # 시뮬레이션 시간 관리 (SimulationClock)
│   ├── environment.py      # 지상국, IoT 클러스터 등 환경 요소
│   └── satellite.py        # 위성 기본 클래스 및 마스터/워커 위성 클래스
│
└── utils/                  # 기타 유틸리티 모듈
    ├── logging_setup.py    # 로그 설정 (KST 적용, 파일 버전 관리)
    └── skyfield_utils.py   # Skyfield 관련 헬퍼 기능

각 파일의 주요 역할
main.py: 전체 시뮬레이션의 시작점입니다. 각 구성 요소를 초기화하고 비동기적으로 실행하는 역할을 담당합니다.

config.py: LOCAL_EPOCHS, MIN_MODELS_FOR_AGGREGATION 등 시뮬레이션의 동작을 결정하는 모든 주요 파라미터를 한곳에서 관리하여 실험과 수정이 용이하도록 합니다.

ml/ 폴더: 모델 정의, 데이터셋 처리, 학습 및 평가 로직 등 머신러닝과 관련된 모든 코드가 이곳에 모여있습니다.

simulation/ 폴더: Satellite, GroundStation 등 시뮬레이션 세계를 구성하는 핵심 객체들의 정의와 동작 로직을 담고 있습니다.

utils/ 폴더: 로깅, 시간 변환 등 프로젝트 전반에서 사용되는 보조 기능들을 분리하여 코드 중복을 방지합니다.

이렇게 구조화함으로써 각 파일은 하나의 명확한 책임만 가지게 되어, 앞으로 새로운 기능을 추가하거나 기존 로직을 수정할 때 훨씬 수월하게 작업할 수 있습니다.